{% ckan_extends %}
{% block core_fields %}
      <fieldset>
        <legend>{{ _('Change details') }}</legend>
        {{ form.input('name', label=_('Username'), id='field-username', value=data.name, error=errors.name, classes=['control-medium'], attrs={'readonly': '', 'class': 'form-control'}) }}

        {{ form.input('fullname', label=_('Full name'), id='field-fullname', value=data.fullname, error=errors.fullname, placeholder=_('eg. Joe Bloggs'), classes=['control-medium'], attrs={'class': 'form-control', 'autocomplete': 'name'}) }}

        {{ form.input('email', label=_('Email'), id='field-email', type='email', value=data.email, error=errors.email, placeholder=_('eg. joe@example.com'), classes=['control-medium'], attrs={'class': 'form-control', 'autocomplete': 'email'}, is_required=true) }}

        {{ form.markdown('about', label=_('About'), id='field-about', value=data.about, error=errors.about, placeholder=_('A little information about yourself')) }}
      </fieldset>
{% endblock %}

{% block change_password %}
<fieldset>
  <legend>{{ _('Change password') }}</legend>
  {{ form.input('old_password',
                type='password',
                label=_('Old Password'),
                id='field-password-old',
                value=data.oldpassword,
                error=errors.oldpassword,
                classes=['control-medium'],
                attrs={'autocomplete': 'current-password', 'class': 'form-control'}
                ) }}

  {{ form.input('password1', type='password', label=_('Password'), id='field-password', value=data.password1, error=errors.password1, classes=['control-medium'], attrs={'autocomplete': 'new-password', 'class': 'form-control'} ) }}

  {{ form.input('password2', type='password', label=_('Confirm Password'), id='field-password-confirm', value=data.password2, error=errors.password2, classes=['control-medium'], attrs={'autocomplete': 'new-password', 'class': 'form-control'}) }}
</fieldset>
{% endblock %}

{% block form %}
      {{ super() }}
      <div class="delete-account">
          <h6>Delete account</h6>
          <p>
              If you wish to delete your account, please <a href="mailto:datastore@london.gov.uk">email the site administrator</a> from the email address associated with your account.
              All personal data will be removed from our systems upon request in accordance with GDPR regulation. Further information can be found in the <a href="/about/privacy-policy">Privacy Policy</a>.
          </p>
      </div>
{% endblock %}
